<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum AI Playground - Simplified</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #333;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* Â∑¶„Çµ„Ç§„Éâ„Éê„Éº - Á∞°ÊòìÂåñ */
        .sidebar-left {
            width: 200px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.2);
        }

        .sidebar-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2a5298;
            border-bottom: 2px solid #2a5298;
            padding-bottom: 5px;
        }

        /* „É°„Ç§„É≥„Éì„Ç∏„É•„Ç¢„É©„Ç§„Ç∂„Éº */
        .main-visualizer {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .network-canvas {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        /* Âè≥„Çµ„Ç§„Éâ„Éê„Éº - Âá∫ÂäõË®≠ÂÆö */
        .sidebar-right {
            width: 250px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            overflow-y: auto;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
        }

        /* SVG „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ */
        #network-svg {
            width: 100%;
            height: 100%;
        }

        /* „Éé„Éº„ÉâÔºà„Éã„É•„Éº„É≠„É≥/ÈáèÂ≠ê„Éì„ÉÉ„ÉàÔºâ */
        .node {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .node:hover {
            filter: brightness(1.2);
        }

        .classical-node {
            fill: #4CAF50;
            stroke: #2E7D32;
            stroke-width: 2;
        }

        .quantum-node {
            fill: #9C27B0;
            stroke: #6A1B9A;
            stroke-width: 2;
        }

        .input-node {
            fill: #2196F3;
            stroke: #1565C0;
            stroke-width: 2;
        }

        .output-node {
            fill: #FF9800;
            stroke: #E65100;
            stroke-width: 2;
        }

        /* „Ç®„ÉÉ„Ç∏ÔºàÊé•Á∂öÔºâ */
        .edge {
            stroke: #666;
            stroke-width: 1;
            fill: none;
            opacity: 0.6;
        }

        .quantum-edge {
            stroke: #9C27B0;
            stroke-width: 2;
            stroke-dasharray: 5,5;
            /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂâäÈô§ */
        }


        /* „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ */
        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .control-input {
            width: 100%;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .slider {
            width: 100%;
            margin: 10px 0;
        }

        /* „Éú„Çø„É≥ */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: #2196F3;
            color: white;
        }

        .btn-primary:hover {
            background: #1976D2;
        }

        .btn-quantum {
            background: #9C27B0;
            color: white;
        }

        .btn-quantum:hover {
            background: #7B1FA2;
        }

        /* „Éá„Éº„Çø„Éï„É≠„ÉºÂèØË¶ñÂåñ */
        .data-flow {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #FFC107;
            border-radius: 50%;
            /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂâäÈô§ */
            pointer-events: none;
            box-shadow: 0 0 10px #FFC107;
        }


        /* ÈáèÂ≠êÁä∂ÊÖãË°®Á§∫ */
        .quantum-state {
            background: rgba(156, 39, 176, 0.1);
            border: 2px solid #9C27B0;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
        }

        .superposition {
            color: #9C27B0;
            font-weight: bold;
        }

        /* „ÉÑ„Éº„É´„ÉÅ„ÉÉ„Éó */
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }

        /* „É°„Éà„É™„ÇØ„ÇπË°®Á§∫ */
        .metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .metric-card {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2196F3;
        }

        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Âà∂Âæ° */
        .static-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        /* „É¨„Ç§„É§„ÉºÈÅ∏Êäû */
        .layer-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
        }

        .layer-btn {
            padding: 5px 10px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .layer-btn.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

        .layer-btn.quantum {
            border-color: #9C27B0;
        }

        .layer-btn.quantum.active {
            background: #9C27B0;
            border-color: #9C27B0;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            position: absolute;
            top: 0;
            left: 250px;
            right: 250px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .header h1 {
            font-size: 1.5em;
            color: #2a5298;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Â∑¶„Çµ„Ç§„Éâ„Éê„ÉºÔºöÈáèÂ≠êË®≠ÂÆö -->
        <div class="sidebar-left">
            <div class="sidebar-title">‚öõÔ∏è ÈáèÂ≠êË®≠ÂÆö</div>
            
            <div class="control-group">
                <label class="control-label">ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞</label>
                <input type="range" class="slider" id="qubit-slider" 
                       min="4" max="12" value="8" 
                       oninput="updateQubits(this.value)">
                <div style="text-align: center; font-weight: bold; margin-top: 5px;">
                    <span id="qubit-count">8</span> qubits
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">ÈáèÂ≠êÂ±§Êï∞</label>
                <input type="range" class="slider" id="layer-slider" 
                       min="1" max="5" value="3" 
                       oninput="updateLayers(this.value)">
                <div style="text-align: center; font-weight: bold; margin-top: 5px;">
                    <span id="layer-count">3</span> layers
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞</label>
                <select id="embedding-select" class="control-input" onchange="updateEmbedding(this.value)">
                    <option value="angle">Angle</option>
                    <option value="amplitude">Amplitude</option>
                </select>
            </div>

            <div class="control-group">
                <label class="control-label">„Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà</label>
                <select id="entanglement-select" class="control-input" onchange="updateEntanglement(this.value)">
                    <option value="linear">Linear</option>
                    <option value="circular">Circular</option>
                    <option value="full">Full</option>
                </select>
            </div>
        </div>

        <!-- „É°„Ç§„É≥„Éì„Ç∏„É•„Ç¢„É©„Ç§„Ç∂„Éº -->
        <div class="main-visualizer">
            <!-- „Éò„ÉÉ„ÉÄ„Éº -->
            <div class="header">
                <h1>üåå Quantum AI Playground</h1>
                <div class="subtitle">„Ç¨„Ç§„Çπ„Çø„ÉºÈáèÂ≠êAI„ÅÆÊßãÈÄ†ÂèØË¶ñÂåñ (Á∞°ÊòìÁâà)</div>
            </div>

            <!-- „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊèèÁîª„Ç®„É™„Ç¢ -->
            <div class="network-canvas" id="network-canvas">
                <svg id="network-svg"></svg>
                <div class="tooltip" id="tooltip"></div>
            </div>

            <!-- „Ç≥„É≥„Éà„É≠„Éº„É´„Éë„Éç„É´ -->
            <div class="control-panel">
                <div class="static-controls">
                    <button class="btn btn-quantum" onclick="toggleQuantumMode()">‚öõÔ∏è ÈáèÂ≠ê„É¢„Éº„Éâ</button>
                </div>
            </div>
        </div>

        <!-- Âè≥„Çµ„Ç§„Éâ„Éê„ÉºÔºöÈáèÂ≠êÂõûË∑ØË©≥Á¥∞„Å®„Ç≥„É≥„Éù„Éº„Ç∂„ÉºÈÄ£Êê∫ -->
        <div class="sidebar-right">
            <div class="sidebar-title">‚öõÔ∏è ÈáèÂ≠êÂõûË∑ØË©≥Á¥∞</div>
            
            <div class="quantum-state">
                <div style="font-weight: bold; margin-bottom: 5px;">ÈáèÂ≠êÁä∂ÊÖã</div>
                <div class="superposition">
                    |œà‚ü© = Œ±|0‚ü© + Œ≤|1‚ü©
                </div>
                <div style="margin-top: 10px; font-size: 0.9em;">
                    Á¢∫ÁéáÊåØÂπÖ: Œ±=0.707, Œ≤=0.707
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">ÂõûË∑ØÊßãÊàê</label>
                <div style="background: #f0f8ff; padding: 10px; border-radius: 8px; font-size: 11px; border: 1px solid #9c27b0;">
                    <div style="margin: 3px 0;"><strong>ÂÖ•Âäõ:</strong> ËßíÂ∫¶„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞</div>
                    <div style="margin: 3px 0;"><strong>„Ç≤„Éº„Éà:</strong> RY, RZ, CNOT</div>
                    <div style="margin: 3px 0;"><strong>Ê∏¨ÂÆö:</strong> Pauli-Z</div>
                    <div style="margin: 3px 0; color: #9c27b0;"><strong>„Éë„É©„É°„Éº„Çø:</strong> <span id="param-count">32</span>ÂÄã</div>
                </div>
            </div>
            
            <!-- „Ç≥„É≥„Éù„Éº„Ç∂„ÉºÈÄ£Êê∫ -->
            <div class="sidebar-title" style="margin-top: 20px; color: #9C27B0;">üîó „ÉØ„Éº„ÇØ„Éï„É≠„Éº</div>
            <div class="control-group">
                <button class="btn btn-quantum" style="width: 100%;" onclick="exportToQiskit()">
                    üåê IBM Quantum Composer„Å∏ ‚Üí
                </button>
                <div style="font-size: 0.8em; color: #666; margin-top: 5px; text-align: center;">
                    OpenQASM„Ç≥„Éº„Éâ„ÇíÁîüÊàê„Åó„Å¶Composer„ÅßÂÆüË°å
                </div>
                
                <button class="btn btn-quantum" style="width: 100%; margin-top: 10px; background: #ff6b35;" onclick="exportToQuantumDesigner()">
                    üé® Quantum Designer„Å∏ ‚Üí
                </button>
                <div style="font-size: 0.8em; color: #666; margin-top: 5px; text-align: center;">
                    Ë®≠ÂÆö„Å®QASM„Ç≥„Éº„Éâ„ÇíDesigner„ÅßÁ∑®ÈõÜ„ÉªÂ≠¶Áøí
                </div>
            </div>
        </div>
    </div>

    <script>
        // „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊßãÈÄ†„ÅÆÂÆöÁæ©
        let networkStructure = {
            input: 252,
            quantum: 8,
            hidden: [128, 64],
            output: 5
        };

        let isQuantumMode = true;
        let dataFlowElements = [];

        // SVGË¶ÅÁ¥†„ÅÆÂàùÊúüÂåñ
        function initializeNetwork() {
            const svg = document.getElementById('network-svg');
            const rect = svg.getBoundingClientRect();
            const width = rect.width;
            const height = rect.height;

            // „ÇØ„É™„Ç¢
            svg.innerHTML = '';

            // Â±§„ÅÆÈÖçÁΩÆ
            const layers = [];
            
            // ÂÖ•ÂäõÂ±§Ôºà7„ÉÅ„É£„É≥„Éç„É´Ë°®Á§∫Ôºâ
            layers.push({
                type: 'input',
                nodes: 7,  // 7„ÉÅ„É£„É≥„Éç„É´„ÇíË°®Á§∫
                x: width * 0.1,
                labels: ['Ëá™ÂàÜÂñÑÁéâ', 'Ëá™ÂàÜÊÇ™Áéâ', 'ÊïµÈßí', 'Á¢∫Ë™çÊ∏àÂñÑÁéâ', 'Á¢∫Ë™çÊ∏àÊÇ™Áéâ', 'ÂêàÊ≥ïÊâã', 'ËÑ±Âá∫‰ΩçÁΩÆ']
            });

            // ÈáèÂ≠êÂ±§
            if (isQuantumMode) {
                layers.push({
                    type: 'quantum',
                    nodes: networkStructure.quantum,
                    x: width * 0.35
                });
            }

            // Èö†„ÇåÂ±§
            layers.push({
                type: 'hidden',
                nodes: 8,  // Á∞°Áï•ÂåñË°®Á§∫
                x: width * 0.6
            });

            layers.push({
                type: 'hidden',
                nodes: 6,  // Á∞°Áï•ÂåñË°®Á§∫
                x: width * 0.75
            });

            // Âá∫ÂäõÂ±§
            layers.push({
                type: 'output',
                nodes: 5,
                x: width * 0.9
            });

            // „Éé„Éº„Éâ„ÅÆÊèèÁîª
            layers.forEach((layer, layerIndex) => {
                const nodeSpacing = height / (layer.nodes + 1);
                
                for (let i = 0; i < layer.nodes; i++) {
                    const y = nodeSpacing * (i + 1);
                    
                    // „Éé„Éº„Éâ‰ΩúÊàê
                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    circle.setAttribute('cx', layer.x);
                    circle.setAttribute('cy', y);
                    circle.setAttribute('r', layer.type === 'quantum' ? 15 : 10);
                    circle.setAttribute('class', `node ${layer.type}-node`);
                    circle.setAttribute('id', `node-${layerIndex}-${i}`);
                    
                    // „ÉÑ„Éº„É´„ÉÅ„ÉÉ„Éó„Ç§„Éô„É≥„Éà
                    circle.addEventListener('mouseenter', (e) => showTooltip(e, layer, i));
                    circle.addEventListener('mouseleave', hideTooltip);
                    
                    svg.appendChild(circle);

                    // „É©„Éô„É´
                    if (layer.type === 'output') {
                        const labels = ['‚Üë', '‚Üí', '‚Üì', '‚Üê', 'üö™'];
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('x', layer.x + 25);
                        text.setAttribute('y', y + 5);
                        text.setAttribute('fill', '#333');
                        text.setAttribute('font-size', '14');
                        text.textContent = labels[i];
                        svg.appendChild(text);
                    } else if (layer.type === 'input' && layer.labels) {
                        // ÂÖ•ÂäõÂ±§„ÅÆ„ÉÅ„É£„É≥„Éç„É´„É©„Éô„É´
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('x', layer.x - 60);
                        text.setAttribute('y', y + 5);
                        text.setAttribute('fill', '#333');
                        text.setAttribute('font-size', '10');
                        text.textContent = layer.labels[i];
                        svg.appendChild(text);
                    }
                }

                // „Ç®„ÉÉ„Ç∏„ÅÆÊèèÁîªÔºàÊ¨°„ÅÆÂ±§„Å∏„ÅÆÊé•Á∂öÔºâ
                if (layerIndex < layers.length - 1) {
                    const nextLayer = layers[layerIndex + 1];
                    const currentNodeSpacing = height / (layer.nodes + 1);
                    const nextNodeSpacing = height / (nextLayer.nodes + 1);

                    // 7„ÉÅ„É£„É≥„Éç„É´ÂùáÁ≠âÂàÜÊï£„Å´Âü∫„Å•„ÅèÊé•Á∂öË°®Á§∫
                    if (layer.type === 'input' && nextLayer.type === 'quantum') {
                        // ÂÖ•Âäõ‚ÜíÈáèÂ≠ê: 7„ÉÅ„É£„É≥„Éç„É´„Åã„ÇâÈáèÂ≠ê„Éì„ÉÉ„Éà„Å∏„ÅÆÂàÜÊï£„ÇíË°®Á§∫
                        for (let i = 0; i < layer.nodes; i++) {
                            for (let j = 0; j < nextLayer.nodes; j++) {
                            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                            const y1 = currentNodeSpacing * (i + 1);
                            const y2 = nextNodeSpacing * (j + 1);
                            
                                const d = `M ${layer.x} ${y1} Q ${(layer.x + nextLayer.x) / 2} ${(y1 + y2) / 2} ${nextLayer.x} ${y2}`;
                                path.setAttribute('d', d);
                                path.setAttribute('class', 'input-quantum-edge');
                                path.setAttribute('stroke', `hsl(${i * 360 / layer.nodes}, 70%, 50%)`);
                                path.setAttribute('stroke-width', '1.5');
                                path.setAttribute('opacity', '0.6');
                                path.setAttribute('id', `edge-${layerIndex}-${i}-${j}`);
                                
                                svg.appendChild(path);
                            }
                        }
                    } else {
                        // „Åù„ÅÆ‰ªñ„ÅÆÊé•Á∂ö: Á∞°Áï•ÂåñË°®Á§∫
                        for (let i = 0; i < layer.nodes; i++) {
                            for (let j = 0; j < Math.min(nextLayer.nodes, layer.nodes); j++) {
                                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                                const y1 = currentNodeSpacing * (i + 1);
                                const y2 = nextNodeSpacing * (j + 1);
                                
                                const d = `M ${layer.x} ${y1} Q ${(layer.x + nextLayer.x) / 2} ${(y1 + y2) / 2} ${nextLayer.x} ${y2}`;
                                path.setAttribute('d', d);
                                path.setAttribute('class', layer.type === 'quantum' ? 'quantum-edge' : 'edge');
                                path.setAttribute('id', `edge-${layerIndex}-${i}-${j}`);
                                
                                svg.appendChild(path);
                            }
                        }
                    }
                }
            });

            // ÈáèÂ≠ê„Ç≤„Éº„ÉàË°®Á§∫ÔºàÈáèÂ≠ê„É¢„Éº„ÉâÊôÇÔºâ
            if (isQuantumMode) {
                addQuantumGates(svg, width, height);
            }
        }

        // ÈáèÂ≠ê„Ç≤„Éº„Éà„ÅÆËøΩÂä†
        function addQuantumGates(svg, width, height) {
            const quantumX = width * 0.35;
            const gateSize = 30;
            
            // RY„Ç≤„Éº„Éà
            const ryGate = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            ryGate.setAttribute('x', quantumX - 60);
            ryGate.setAttribute('y', height * 0.3);
            ryGate.setAttribute('width', gateSize);
            ryGate.setAttribute('height', gateSize);
            ryGate.setAttribute('fill', '#E91E63');
            ryGate.setAttribute('rx', 5);
            
            const ryText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            ryText.setAttribute('x', quantumX - 45);
            ryText.setAttribute('y', height * 0.3 + 20);
            ryText.setAttribute('fill', 'white');
            ryText.setAttribute('font-size', '12');
            ryText.setAttribute('text-anchor', 'middle');
            ryText.textContent = 'RY';
            
            svg.appendChild(ryGate);
            svg.appendChild(ryText);

            // CNOT„Ç≤„Éº„Éà
            const cnotGate = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            const cnotX = quantumX + 60;
            
            const control = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            control.setAttribute('cx', cnotX);
            control.setAttribute('cy', height * 0.4);
            control.setAttribute('r', 5);
            control.setAttribute('fill', '#3F51B5');
            
            const target = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            target.setAttribute('cx', cnotX);
            target.setAttribute('cy', height * 0.6);
            target.setAttribute('r', 8);
            target.setAttribute('fill', 'none');
            target.setAttribute('stroke', '#3F51B5');
            target.setAttribute('stroke-width', 2);
            
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', cnotX);
            line.setAttribute('y1', height * 0.4);
            line.setAttribute('x2', cnotX);
            line.setAttribute('y2', height * 0.6);
            line.setAttribute('stroke', '#3F51B5');
            line.setAttribute('stroke-width', 2);
            
            cnotGate.appendChild(line);
            cnotGate.appendChild(control);
            cnotGate.appendChild(target);
            svg.appendChild(cnotGate);
        }

        // Âº∑ÂåñCNNÂèØË¶ñÂåñÂà∂Âæ°
        function toggleCNNVisualization(layerType) {
            const buttons = document.querySelectorAll('button[onclick*="toggleCNNVisualization"]');
            
            // Reset all buttons
            buttons.forEach(btn => {
                btn.style.backgroundColor = '';
                btn.style.color = '';
            });
            
            // Highlight selected button
            const selectedBtn = document.querySelector(`button[onclick="toggleCNNVisualization('${layerType}')"]`);
            if (selectedBtn) {
                selectedBtn.style.backgroundColor = '#4caf50';
                selectedBtn.style.color = 'white';
            }
            
            // Update visualization based on layer type
            switch(layerType) {
                case 'preprocessing':
                    visualizePreprocessingLayers();
                    break;
                case 'postprocessing':
                    visualizePostprocessingLayers();
                    break;
                case 'quantum':
                    visualizeQuantumLayers();
                    break;
                case 'gradients':
                    visualizeGradientFlow();
                    break;
            }
        }
        
        function visualizePreprocessingLayers() {
            // Simulate preprocessing layer visualization
            const svg = document.getElementById('network-svg');
            
            // Add preprocessing layer indicators
            const layers = [252, 512, 256, 128, 64, 4];
            const colors = ['#ff9800', '#ff5722', '#f44336', '#e91e63', '#9c27b0', '#673ab7'];
            
            // Clear previous indicators
            const oldIndicators = svg.querySelectorAll('.preprocessing-indicator');
            oldIndicators.forEach(ind => ind.remove());
            
            layers.forEach((size, i) => {
                const indicator = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                indicator.setAttribute('class', 'preprocessing-indicator');
                indicator.setAttribute('x', 50 + i * 70);
                indicator.setAttribute('y', 50);
                indicator.setAttribute('width', Math.min(60, size / 10));
                indicator.setAttribute('height', 20);
                indicator.setAttribute('fill', colors[i]);
                indicator.setAttribute('opacity', '0.7');
                
                // Add text label
                const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                label.setAttribute('x', 50 + i * 70 + 5);
                label.setAttribute('y', 65);
                label.setAttribute('font-size', '10');
                label.setAttribute('fill', 'white');
                label.textContent = size;
                label.setAttribute('class', 'preprocessing-indicator');
                
                svg.appendChild(indicator);
                svg.appendChild(label);
            });
        }
        
        function visualizePostprocessingLayers() {
            const svg = document.getElementById('network-svg');
            
            // Add postprocessing layer indicators
            const layers = [4, 128, 256, 512, 256, 128, 64, 36];
            const colors = ['#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a'];
            
            const oldIndicators = svg.querySelectorAll('.postprocessing-indicator');
            oldIndicators.forEach(ind => ind.remove());
            
            layers.forEach((size, i) => {
                const indicator = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                indicator.setAttribute('class', 'postprocessing-indicator');
                indicator.setAttribute('x', 50 + i * 70);
                indicator.setAttribute('y', 200);
                indicator.setAttribute('width', Math.min(60, size / 10));
                indicator.setAttribute('height', 20);
                indicator.setAttribute('fill', colors[i]);
                indicator.setAttribute('opacity', '0.7');
                
                const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                label.setAttribute('x', 50 + i * 70 + 5);
                label.setAttribute('y', 215);
                label.setAttribute('font-size', '10');
                label.setAttribute('fill', 'white');
                label.textContent = size;
                label.setAttribute('class', 'postprocessing-indicator');
                
                svg.appendChild(indicator);
                svg.appendChild(label);
            });
        }
        
        function visualizeQuantumLayers() {
            const svg = document.getElementById('network-svg');
            
            // Add quantum circuit visualization
            const oldIndicators = svg.querySelectorAll('.quantum-indicator');
            oldIndicators.forEach(ind => ind.remove());
            
            // Draw quantum circuit representation
            for (let qubit = 0; qubit < 4; qubit++) {
                // Qubit line
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('class', 'quantum-indicator');
                line.setAttribute('x1', 200);
                line.setAttribute('y1', 120 + qubit * 30);
                line.setAttribute('x2', 450);
                line.setAttribute('y2', 120 + qubit * 30);
                line.setAttribute('stroke', '#9c27b0');
                line.setAttribute('stroke-width', '2');
                svg.appendChild(line);
                
                // Quantum gates
                for (let layer = 0; layer < 2; layer++) {
                    const gate = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    gate.setAttribute('class', 'quantum-indicator');
                    gate.setAttribute('cx', 250 + layer * 80);
                    gate.setAttribute('cy', 120 + qubit * 30);
                    gate.setAttribute('r', 8);
                    gate.setAttribute('fill', '#e91e63');
                    gate.setAttribute('stroke', 'white');
                    gate.setAttribute('stroke-width', '2');
                    svg.appendChild(gate);
                }
            }
            
            // Add enhancement layer indicator
            const enhancer = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            enhancer.setAttribute('class', 'quantum-indicator');
            enhancer.setAttribute('x', 180);
            enhancer.setAttribute('y', 100);
            enhancer.setAttribute('width', 40);
            enhancer.setAttribute('height', 120);
            enhancer.setAttribute('fill', '#ff9800');
            enhancer.setAttribute('opacity', '0.3');
            enhancer.setAttribute('stroke', '#ff5722');
            enhancer.setAttribute('stroke-width', '2');
            svg.appendChild(enhancer);
            
            const enhancerLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            enhancerLabel.setAttribute('class', 'quantum-indicator');
            enhancerLabel.setAttribute('x', 200);
            enhancerLabel.setAttribute('y', 95);
            enhancerLabel.setAttribute('text-anchor', 'middle');
            enhancerLabel.setAttribute('font-size', '10');
            enhancerLabel.setAttribute('fill', '#ff5722');
            enhancerLabel.textContent = 'ÈáèÂ≠êÁâπÂæ¥Â¢óÂº∑';
            svg.appendChild(enhancerLabel);
        }
        
        function visualizeGradientFlow() {
            const svg = document.getElementById('network-svg');
            
            // Add gradient flow indicators
            const oldIndicators = svg.querySelectorAll('.gradient-indicator');
            oldIndicators.forEach(ind => ind.remove());
            
            // Simulate gradient flow with animated arrows
            for (let i = 0; i < 5; i++) {
                const arrow = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                arrow.setAttribute('class', 'gradient-indicator');
                arrow.setAttribute('d', `M ${100 + i * 100} 300 L ${150 + i * 100} 290 L ${150 + i * 100} 310 Z`);
                arrow.setAttribute('fill', '#f44336');
                arrow.setAttribute('opacity', '0.8');
                
                // ÈùôÁöÑ„Å™Áü¢Âç∞Ôºà„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å™„ÅóÔºâ
                
                svg.appendChild(arrow);
            }
            
            // Add gradient norm indicators
            const gradNorms = [2.5, 1.8, 3.2, 1.1, 2.9];
            gradNorms.forEach((norm, i) => {
                const indicator = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                indicator.setAttribute('class', 'gradient-indicator');
                indicator.setAttribute('x', 100 + i * 100);
                indicator.setAttribute('y', 330);
                indicator.setAttribute('font-size', '12');
                indicator.setAttribute('fill', '#f44336');
                indicator.textContent = `‚àá: ${norm}`;
                svg.appendChild(indicator);
            });
        }
        
        // Update 36D spatial Q-value map
        function updateSpatialQValueMap() {
            const cells = document.querySelectorAll('.qvalue-cell');
            
            cells.forEach(cell => {
                // Simulate dynamic Q-value updates
                const newValue = (Math.random() * 0.9 + 0.1).toFixed(1);
                cell.textContent = newValue;
                
                // Update color based on value
                const value = parseFloat(newValue);
                if (value > 0.7) {
                    cell.style.background = '#4caf50'; // High value - green
                } else if (value > 0.5) {
                    cell.style.background = '#8bc34a'; // Medium-high - light green
                } else if (value > 0.3) {
                    cell.style.background = '#cddc39'; // Medium - yellow
                } else if (value > 0.2) {
                    cell.style.background = '#ffeb3b'; // Medium-low - bright yellow
                } else {
                    cell.style.background = '#ffc107'; // Low - orange
                }
            });
        }
        
        // Performance monitoring
        function updatePerformanceMetrics() {
            // Simulate real-time performance updates
            const fps = (190 + Math.random() * 20).toFixed(1);
            const memory = (2.4 + Math.random() * 0.2).toFixed(2);
            const cacheHit = Math.floor(60 + Math.random() * 15);
            
            document.getElementById('fps-counter').textContent = fps;
            document.getElementById('memory-usage').textContent = memory;
            document.getElementById('cache-hit-rate').textContent = cacheHit;
        }
        
        // ÂàùÂõûË°®Á§∫„ÅÆ„ÅøÔºà„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å™„ÅóÔºâ
        updatePerformanceMetrics();
        updateSpatialQValueMap();


        // ÈáèÂ≠ê„É¢„Éº„ÉâÂàá„ÇäÊõø„Åà
        function toggleQuantumMode() {
            isQuantumMode = !isQuantumMode;
            initializeNetwork();
        }

        // „ÉÑ„Éº„É´„ÉÅ„ÉÉ„ÉóË°®Á§∫
        function showTooltip(event, layer, nodeIndex) {
            const tooltip = document.getElementById('tooltip');
            const rect = event.target.getBoundingClientRect();
            
            let content = '';
            if (layer.type === 'input') {
                const channels = ['Ëá™ÂàÜ„ÅÆÂñÑÁéâ', 'Ëá™ÂàÜ„ÅÆÊÇ™Áéâ', 'ÊïµÈßí', 'Á¢∫Ë™çÊ∏à„ÅøÂñÑÁéâ', 'Á¢∫Ë™çÊ∏à„ÅøÊÇ™Áéâ', 'ÂêàÊ≥ïÊâã', 'ËÑ±Âá∫‰ΩçÁΩÆ'];
                const features = ['Âπ≥ÂùáÂÄ§', 'ÊúÄÂ§ßÂÄ§', 'Èùû„Çº„É≠Áéá', '‰∏≠Â§ÆÈÉ®Âπ≥Âùá'];
                content = `ÂÖ•Âäõ„ÉÅ„É£„É≥„Éç„É´: ${channels[nodeIndex]}<br>` +
                         `Ê¨°ÂÖÉ: 36 (6√ó6)<br>` +
                         `ÊäΩÂá∫ÁâπÂæ¥: ${features.join(', ')}<br>` +
                         `7„ÉÅ„É£„É≥„Éç„É´√ó4ÁâπÂæ¥=28Ê¨°ÂÖÉ (11.1%„Éá„Éº„ÇøÊ¥ªÁî®)<br>` +
                         `‚úÖ Âº∑Âà∂ÂùáÁ≠âÂàÜÊï£: ÂÖ®7„ÉÅ„É£„É≥„Éç„É´‰øùË®º (ÊóßÊñπÂºè„ÅÆ4.6ÂÄçÂäπÁéá)`;
            } else if (layer.type === 'quantum') {
                const qubits = ['ChannelÊ∑∑Âêà1', 'ChannelÊ∑∑Âêà2', 'ÂñÑÁéâÁâπÂæ¥', 'ÊÇ™ÁéâÁâπÂæ¥', 'ÊïµÈßíÁâπÂæ¥', 'ÂêàÊ≥ïÊâãÁâπÂæ¥', 'ËÑ±Âá∫ÁâπÂæ¥', 'Êà¶Áï•ÁâπÂæ¥'];
                content = `ÈáèÂ≠ê„Éì„ÉÉ„Éà ${nodeIndex + 1}: ${qubits[nodeIndex] || 'Ë§áÂêàÁâπÂæ¥'}<br>` +
                         `Áä∂ÊÖã: |œà‚ü© = Œ±|0‚ü© + Œ≤|1‚ü©<br>` +
                         `‚úÖ Âº∑Âà∂ÂùáÁ≠âÂàÜÊï£„Å´„Çà„ÇäÂÖ®7„ÉÅ„É£„É≥„Éç„É´Áµ±Âêà<br>` +
                         `ÊîπÂñÑ: Á≠âÈñìÈöî‚ÜíÈáçË¶ÅÂ∫¶È†ÜÈÅ∏Êäû („ÉÅ„É£„É≥„Éç„É´Ê¨†ÊêçËß£Ê∂à)`;
            } else if (layer.type === 'hidden') {
                content = `Èö†„ÇåÂ±§„Éã„É•„Éº„É≠„É≥<br>` +
                         `ÈáèÂ≠êÁâπÂæ¥„ÅÆÂè§ÂÖ∏Â§âÊèõ<br>` +
                         `Ê¥ªÊÄßÂåñ: ${(Math.random() * 0.9 + 0.1).toFixed(2)}`;
            } else if (layer.type === 'output') {
                const actions = ['‰∏äÁßªÂãï', 'Âè≥ÁßªÂãï', '‰∏ãÁßªÂãï', 'Â∑¶ÁßªÂãï', 'ËÑ±Âá∫'];
                content = `Âá∫Âäõ: ${actions[nodeIndex]}<br>` +
                         `QÂÄ§: ${(Math.random() * 0.9 + 0.1).toFixed(2)}<br>` +
                         `ÂÖ®7„ÉÅ„É£„É≥„Éç„É´ÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„ÅüË°åÂãï‰æ°ÂÄ§<br>` +
                         `‚úÖ ÊîπÂñÑÊ∏à„Åø: È´òÂäπÁéá„Éá„Éº„ÇøÊ¥ªÁî® (4.6x)`;
            }
            
            tooltip.innerHTML = content;
            tooltip.style.left = rect.left + 'px';
            tooltip.style.top = (rect.top - 50) + 'px';
            tooltip.style.display = 'block';
        }

        // „ÉÑ„Éº„É´„ÉÅ„ÉÉ„ÉóÈùûË°®Á§∫
        function hideTooltip() {
            document.getElementById('tooltip').style.display = 'none';
        }

        // ÂÖ•ÂäõÂ±§„ÅÆÂàá„ÇäÊõø„Åà
        function toggleInput(type) {
            event.target.classList.toggle('active');
            updateInputDim();
        }

        // ÂÖ•ÂäõÊ¨°ÂÖÉ„ÅÆÊõ¥Êñ∞
        function updateInputDim(value) {
            if (value) {
                const dim = value * 36;
                document.getElementById('input-dim').textContent = dim;
                document.getElementById('input-total').textContent = dim;
                document.getElementById('input-active').textContent = value;
                networkStructure.input = dim;
            }
        }

        // ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞„ÅÆÊõ¥Êñ∞
        function updateQubits(value) {
            document.getElementById('qubit-count').textContent = value;
            networkStructure.quantum = parseInt(value);
            initializeNetwork();
        }

        // ÈáèÂ≠êÂ±§Êï∞„ÅÆÊõ¥Êñ∞
        function updateLayers(value) {
            document.getElementById('layer-count').textContent = value;
        }

        // „Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà„ÅÆÊõ¥Êñ∞
        function updateEntanglement(value) {
            // „Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà„Éë„Çø„Éº„É≥„ÅÆÂ§âÊõ¥
            console.log('Entanglement changed to:', value);
            initializeNetwork();
        }

        // „Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞„ÅÆÊõ¥Êñ∞
        function updateEmbedding(value) {
            // „Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞ÊñπÂºè„ÅÆÂ§âÊõ¥
            console.log('Embedding changed to:', value);
            initializeNetwork();
        }

        // Ë°åÂãï‰∫àÊ∏¨
        function predictAction() {
            // QÂÄ§„Åã„ÇâÊúÄÈÅ©Ë°åÂãï„ÇíÊ±∫ÂÆö
            const qValues = {
                up: parseFloat(document.getElementById('q-up').textContent),
                right: parseFloat(document.getElementById('q-right').textContent),
                down: parseFloat(document.getElementById('q-down').textContent),
                left: parseFloat(document.getElementById('q-left').textContent),
                escape: parseFloat(document.getElementById('q-escape').textContent)
            };
            
            const maxAction = Object.keys(qValues).reduce((a, b) => 
                qValues[a] > qValues[b] ? a : b
            );
            
            alert(`‰∫àÊ∏¨Ë°åÂãï: ${maxAction === 'escape' ? 'ËÑ±Âá∫' : maxAction + 'ÁßªÂãï'}\nQÂÄ§: ${qValues[maxAction]}`);
        }

        // ÂàùÊúüÂåñ
        // 3StepË®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø
        function load3StepConfig() {
            const configStr = localStorage.getItem('3step_config');
            if (configStr) {
                try {
                    const config = JSON.parse(configStr);
                    console.log('3StepË®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:', config);
                    
                    // Ë®≠ÂÆö„ÇíÈÅ©Áî®
                    apply3StepConfig(config);
                    
                    // Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÈÄöÁü•
                    showNotification('‚úÖ 3StepË®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü');
                    
                    // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Çí„ÇØ„É™„Ç¢Ôºà‰∏ÄÂ∫¶„Å†„ÅëË™≠„ÅøËæº„ÇÄÔºâ
                    localStorage.removeItem('3step_config');
                    
                    return true;
                } catch (e) {
                    console.error('3StepË®≠ÂÆö„ÅÆË™≠„ÅøËæº„Åø„Ç®„É©„Éº:', e);
                }
            }
            return false;
        }
        
        // 3StepË®≠ÂÆö„ÅÆÈÅ©Áî®
        function apply3StepConfig(config) {
            // ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞„ÅÆË®≠ÂÆö
            if (config.config && config.config.qubits) {
                const slider = document.getElementById('qubit-slider');
                if (slider) {
                    slider.value = config.config.qubits;
                    updateQubits(config.config.qubits);
                }
            }
            
            // Â±§Êï∞„ÅÆË®≠ÂÆö
            if (config.config && config.config.layers) {
                const slider = document.getElementById('layer-slider');
                if (slider) {
                    slider.value = config.config.layers;
                    updateLayers(config.config.layers);
                }
            }
            
            // Ë®≠ÂÆöÊÉÖÂ†±„ÇíË°®Á§∫
            displayConfigInfo(config);
        }
        
        // Ë®≠ÂÆöÊÉÖÂ†±„ÅÆË°®Á§∫
        function displayConfigInfo(config) {
            const infoDiv = document.createElement('div');
            infoDiv.className = 'config-info';
            infoDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: rgba(33, 150, 243, 0.95);
                color: white;
                padding: 15px;
                border-radius: 10px;
                max-width: 300px;
                z-index: 1000;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            `;
            infoDiv.innerHTML = `
                <h4 style="margin: 0 0 10px 0;">üì• 3StepË®≠ÂÆö„É≠„Éº„ÉâÂÆå‰∫Ü</h4>
                <p style="margin: 5px 0;">ÈÖçÁΩÆ: ${config.config.placement}</p>
                <p style="margin: 5px 0;">Â†±ÈÖ¨: ${config.config.reward}</p>
                <p style="margin: 5px 0;">Ë°åÂãï: ${config.config.action}</p>
                <p style="margin: 5px 0;">Â≠¶Áøí: ${config.config.learningMethod}</p>
                <p style="margin: 5px 0;">ÈáèÂ≠ê„Éì„ÉÉ„Éà: ${config.config.qubits}</p>
                <p style="margin: 5px 0;">Â±§Êï∞: ${config.config.layers}</p>
                <button onclick="this.parentElement.remove()" style="
                    background: white;
                    color: #2196F3;
                    border: none;
                    padding: 5px 10px;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-top: 10px;
                    width: 100%;
                ">Èñâ„Åò„Çã</button>
            `;
            document.body.appendChild(infoDiv);
            
            // 5ÁßíÂæå„Å´Ëá™ÂãïÂâäÈô§
            setTimeout(() => {
                if (infoDiv.parentElement) {
                    infoDiv.remove();
                }
            }, 5000);
        }
        
        // ÈÄöÁü•Ë°®Á§∫
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #4CAF50;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.3);
                z-index: 10000;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.remove(), 3000);
        }
        
        // IBM Quantum Composer„Å∏„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function exportToQiskit() {
            // ÁèæÂú®„ÅÆË®≠ÂÆö„ÇíÂèéÈõÜ
            const n_qubits = networkStructure.quantum || 8;
            const n_layers = parseInt(document.getElementById('layer-count')?.textContent || 3);
            const entanglement = document.getElementById('entanglement-select')?.value || 'linear';
            const embedding = document.getElementById('embedding-select')?.value || 'angle';
            
            // OpenQASM„Ç≥„Éº„Éâ„ÇíÁîüÊàê
            const qasmCode = generateOpenQASM(n_qubits, n_layers, entanglement, embedding);
            
            // Base64„Ç®„É≥„Ç≥„Éº„Éâ
            const encodedQASM = btoa(qasmCode);
            
            // IBM Quantum Composer„ÅÆURL„ÇíÊßãÁØâ
            const composerURL = `https://quantum.cloud.ibm.com/composer?initial=${encodedQASM}`;
            
            // Ë®≠ÂÆöÊÉÖÂ†±„Çí„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº
            const configInfo = `// Quantum AI Configuration from Playground
// Generated: ${new Date().toISOString()}
// Qubits: ${n_qubits}
// Layers: ${n_layers}
// Entanglement: ${entanglement}
// Encoding: ${embedding}

${qasmCode}`;
            
            navigator.clipboard.writeText(configInfo).then(() => {
                showNotification('üìã OpenQASM„Ç≥„Éº„Éâ„Çí„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü');
            });
            
            // IBM Quantum Composer„ÇíÊñ∞„Åó„ÅÑ„Çø„Éñ„ÅßÈñã„Åè
            window.open(composerURL, '_blank');
            
            showNotification('üöÄ IBM Quantum Composer„ÇíÈñã„ÅÑ„Å¶„ÅÑ„Åæ„Åô...');
        }

        function exportToQuantumDesigner() {
            // ÁèæÂú®„ÅÆË®≠ÂÆö„ÇíÂèéÈõÜ
            const n_qubits = networkStructure.quantum || 8;
            const n_layers = parseInt(document.getElementById('layer-count')?.textContent || 3);
            const entanglement = document.getElementById('entanglement-select')?.value || 'linear';
            const embedding = document.getElementById('embedding-select')?.value || 'angle';
            
            // OpenQASM„Ç≥„Éº„Éâ„ÇíÁîüÊàê
            const qasmCode = generateOpenQASM(n_qubits, n_layers, entanglement, embedding);
            
            // Ë®≠ÂÆöÊÉÖÂ†±„Å®QASM„Ç≥„Éº„Éâ„ÇíÁµ±Âêà
            const fullExport = `// Quantum AI Configuration from Playground
// Generated: ${new Date().toISOString()}
// Qubits: ${n_qubits}
// Layers: ${n_layers}
// Entanglement: ${entanglement}
// Encoding: ${embedding}

${qasmCode}
`;
            
            // „ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº
            navigator.clipboard.writeText(fullExport).then(() => {
                // Quantum Designer„ÇíÊñ∞„Åó„ÅÑ„Çø„Éñ„ÅßÈñã„Åè
                const designerParams = new URLSearchParams({
                    qubits: n_qubits,
                    layers: n_layers,
                    entanglement: entanglement,
                    source: 'playground',
                    autoload: 'true',
                    hasQasm: 'true'
                });
                
                const designerUrl = `quantum_designer.html?${designerParams.toString()}`;
                window.open(designerUrl, '_blank');
                
                showNotification('üé® Quantum Designer„ÇíÈñã„ÅÑ„Å¶„ÅÑ„Åæ„Åô... (QASM„Ç≥„Éº„Éâ„ÅØ„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº„Åï„Çå„Åæ„Åó„Åü)');
            }).catch(err => {
                console.error('„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Ç≥„Éî„Éº„Å´Â§±Êïó:', err);
                showNotification('‚ùå „Ç®„ÇØ„Çπ„Éù„Éº„Éà„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            });
        }
        
        // OpenQASM„Ç≥„Éº„ÉâÁîüÊàê
        function generateOpenQASM(n_qubits, n_layers, entanglement, embedding = 'angle') {
            let qasm = `// Quantum AI Circuit from Playground
// Geister Game Quantum Model
OPENQASM 2.0;
include "qelib1.inc";

// ${n_qubits} qubits for quantum processing
qreg q[${n_qubits}];
creg c[${n_qubits}];

// Input encoding layer (${embedding} encoding)
`;
            
            // ÂÖ•Âäõ„Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞Â±§
            if (embedding === 'amplitude') {
                // Amplitude encoding - „Çà„ÇäË§áÈõë„Å™ÂàùÊúüÂåñÁä∂ÊÖã
                qasm += `// Amplitude encoding: preparing normalized state\n`;
                for (let i = 0; i < n_qubits; i++) {
                    qasm += `ry(pi/${Math.pow(2, i+1)}) q[${i}]; // Amplitude feature ${i+1}\n`;
                    qasm += `rz(pi/${Math.pow(2, i+2)}) q[${i}]; // Phase component ${i+1}\n`;
                }
            } else {
                // Angle encoding (default)
                for (let i = 0; i < n_qubits; i++) {
                    qasm += `ry(pi/4) q[${i}]; // Input feature ${i+1}\n`;
                }
            }
            
            // „Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞Â±§„ÅÆÂæå„Å´„Éê„É™„Ç¢
            qasm += `\nbarrier q; // Encoding layer barrier\n`;
            
            qasm += `\n// Parameterized quantum layers (${n_layers} layers)\n`;
            
            // „Éë„É©„É°„Éº„ÇøÂåñÈáèÂ≠êÂ±§
            for (let layer = 0; layer < n_layers; layer++) {
                qasm += `// Layer ${layer + 1}\n`;
                
                // Âçò‰∏ÄÈáèÂ≠ê„Éì„ÉÉ„Éà„Ç≤„Éº„Éà
                for (let i = 0; i < n_qubits; i++) {
                    qasm += `ry(pi/8) q[${i}];\n`;
                    qasm += `rz(pi/8) q[${i}];\n`;
                }
                
                // „Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà
                qasm += `// Entanglement: ${entanglement}\n`;
                if (entanglement === 'linear') {
                    for (let i = 0; i < n_qubits - 1; i++) {
                        qasm += `cx q[${i}], q[${i+1}];\n`;
                    }
                } else if (entanglement === 'circular') {
                    for (let i = 0; i < n_qubits - 1; i++) {
                        qasm += `cx q[${i}], q[${i+1}];\n`;
                    }
                    if (n_qubits > 2) {
                        qasm += `cx q[${n_qubits-1}], q[0]; // Circular connection\n`;
                    }
                } else if (entanglement === 'full') {
                    for (let i = 0; i < n_qubits; i++) {
                        for (let j = i + 1; j < n_qubits; j++) {
                            qasm += `cz q[${i}], q[${j}];\n`;
                        }
                    }
                }
                
                // ÂêÑ„É¨„Ç§„É§„Éº„ÅÆÂæå„Å´„Éê„É™„Ç¢
                if (layer < n_layers - 1) {
                    qasm += `barrier q; // Layer ${layer + 1} barrier\n`;
                }
                qasm += '\n';
            }
            
            // Ê∏¨ÂÆöÂâç„ÅÆÊúÄÁµÇ„Éê„É™„Ç¢
            qasm += `barrier q; // Final barrier before measurement\n`;
            
            // Ê∏¨ÂÆö
            qasm += `// Measurement\n`;
            for (let i = 0; i < n_qubits; i++) {
                qasm += `measure q[${i}] -> c[${i}];\n`;
            }
            
            return qasm;
        }
        
        // „Ç∑„É≥„Éó„É´„Å™„Éá„É¢Áî®„ÅÆÂèØË¶ñÂåñ„Ç∑„Çπ„ÉÜ„É†
        
        window.onload = () => {
            // 3StepË®≠ÂÆö„Åå„ÅÇ„Çå„Å∞Ë™≠„ÅøËæº„ÇÄ
            const configLoaded = load3StepConfig();
            
            // ÈÄöÂ∏∏„ÅÆÂàùÊúüÂåñ
            initializeNetwork();
            
            // „Ç∑„É≥„Éó„É´ÂèØË¶ñÂåñUIËøΩÂä†
            addRealtimeVisualizationUI();
            
            // Ë®≠ÂÆö„ÅåË™≠„ÅøËæº„Åæ„Çå„ÅüÂ†¥Âêà„ÅØÂÜçÊèèÁîª
            if (configLoaded) {
                setTimeout(() => {
                    initializeNetwork();
                }, 100);
            }
        };

        // „É™„Ç¢„É´„Çø„Ç§„É†ÂèØË¶ñÂåñUIËøΩÂä†
        function addRealtimeVisualizationUI() {
            // Âè≥„Çµ„Ç§„Éâ„Éê„Éº„Å´„É™„Ç¢„É´„Çø„Ç§„É†Âà∂Âæ°„Éë„Éç„É´„ÇíËøΩÂä†
            const rightSidebar = document.querySelector('.sidebar-right');
            if (!rightSidebar) return;
            
            const realtimePanel = document.createElement('div');
            realtimePanel.className = 'realtime-panel';
            realtimePanel.innerHTML = `
                <div class="sidebar-title">üî¨ CQCNNÊßãÈÄ†Âà∂Âæ°</div>
                
                <!-- „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£ÊÉÖÂ†± -->
                <div class="architecture-section">
                    <h4>üèóÔ∏è „Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£</h4>
                    <div class="arch-item">
                        <span>ÂâçÂá¶ÁêÜCNN:</span>
                        <span class="arch-value">252‚Üí512‚Üí256‚Üí128‚Üí64‚Üí4</span>
                    </div>
                    <div class="arch-item">
                        <span>ÈáèÂ≠êÂõûË∑Ø:</span>
                        <span class="arch-value">4ÈáèÂ≠ê„Éì„ÉÉ„Éà, 2Â±§</span>
                    </div>
                    <div class="arch-item">
                        <span>ÂæåÂá¶ÁêÜCNN:</span>
                        <span class="arch-value">4‚Üí128‚Üí256‚Üí512‚Üí256‚Üí128‚Üí64‚Üí36</span>
                    </div>
                    <div class="arch-item">
                        <span>„Éë„É©„É°„Éº„Çø:</span>
                        <span class="arch-value">647,044ÂÄã</span>
                    </div>
                </div>
                
                <!-- Â±§Ë°®Á§∫Âà∂Âæ° -->
                <div class="layer-control-section">
                    <h4>üéõÔ∏è Â±§Ë°®Á§∫Âà∂Âæ°</h4>
                    <div class="layer-toggles">
                        <label><input type="checkbox" id="showPreprocessor" checked onchange="toggleLayer('preprocessor')"> ÂâçÂá¶ÁêÜCNN</label>
                        <label><input type="checkbox" id="showQuantum" checked onchange="toggleLayer('quantum')"> ÈáèÂ≠êÂõûË∑Ø</label>
                        <label><input type="checkbox" id="showPostprocessor" checked onchange="toggleLayer('postprocessor')"> ÂæåÂá¶ÁêÜCNN</label>
                        <label><input type="checkbox" id="showConnections" checked onchange="toggleLayer('connections')"> Êé•Á∂öÁ∑ö</label>
                    </div>
                </div>
                
                <!-- „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊìç‰Ωú -->
                <div class="network-control-section">
                    <h4>üîß „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊìç‰Ωú</h4>
                    <button onclick="highlightDataFlow()" class="control-btn">„Éá„Éº„Çø„Éï„É≠„ÉºÂº∑Ë™øË°®Á§∫</button>
                    <button onclick="showLayerDetails()" class="control-btn">Â±§Ë©≥Á¥∞Ë°®Á§∫</button>
                    <button onclick="showForwardPass()" class="control-btn">È†Ü‰ºùÊí≠„Éë„ÇπË°®Á§∫</button>
                    <button onclick="resetVisualization()" class="control-btn secondary">„É™„Çª„ÉÉ„Éà</button>
                </div>
                
                <!-- ÈáèÂ≠êÂõûË∑ØË©≥Á¥∞ -->
                <div class="quantum-details-section">
                    <h4>‚öõÔ∏è ÈáèÂ≠êÂõûË∑ØË©≥Á¥∞</h4>
                    <div class="quantum-info">
                        <div class="qubit-count">ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞: <span id="qubitCount">4</span></div>
                        <div class="gate-count">„Ç≤„Éº„ÉàÊï∞: <span id="gateCount">16</span></div>
                        <div class="entanglement-type">„Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà: <span id="entanglementType">Linear</span></div>
                    </div>
                    <button onclick="showQuantumCircuit()" class="control-btn quantum">ÂõûË∑ØÂõ≥Ë°®Á§∫</button>
                </div>
            `;
            
            rightSidebar.appendChild(realtimePanel);
            
            // CSSËøΩÂä†
            addRealtimeCSS();
        }
        
        function addRealtimeCSS() {
            const style = document.createElement('style');
            style.textContent = `
                .realtime-panel {
                    margin-top: 20px;
                    border-top: 2px solid #2a5298;
                    padding-top: 15px;
                }
                
                .architecture-section, .layer-control-section, .network-control-section, .quantum-details-section {
                    margin-bottom: 15px;
                    padding: 12px;
                    background-color: rgba(0,0,0,0.05);
                    border-radius: 8px;
                    border-left: 3px solid #2a5298;
                }
                
                .architecture-section h4, .layer-control-section h4, .network-control-section h4, .quantum-details-section h4 {
                    margin: 0 0 10px 0;
                    font-size: 0.9em;
                    color: #2a5298;
                    font-weight: bold;
                }
                
                .arch-item {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 6px;
                    font-size: 0.8em;
                    align-items: center;
                }
                
                .arch-value {
                    font-family: 'Courier New', monospace;
                    font-weight: bold;
                    color: #1565c0;
                    background: rgba(33, 150, 243, 0.1);
                    padding: 2px 6px;
                    border-radius: 3px;
                    font-size: 0.75em;
                }
                
                .layer-toggles {
                    display: flex;
                    flex-direction: column;
                    gap: 8px;
                }
                
                .layer-toggles label {
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 0.8em;
                    cursor: pointer;
                    padding: 4px;
                    border-radius: 4px;
                    transition: background-color 0.2s;
                }
                
                .layer-toggles label:hover {
                    background-color: rgba(42, 82, 152, 0.1);
                }
                
                .layer-toggles input[type="checkbox"] {
                    transform: scale(1.2);
                }
                
                .control-btn {
                    width: 100%;
                    padding: 8px 10px;
                    margin: 3px 0;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 0.8em;
                    font-weight: bold;
                    transition: all 0.2s ease;
                }
                
                .control-btn {
                    background-color: #2196f3;
                    color: white;
                }
                
                .control-btn:hover {
                    background-color: #1976d2;
                    transform: translateY(-1px);
                }
                
                .control-btn.secondary {
                    background-color: #666;
                }
                
                .control-btn.secondary:hover {
                    background-color: #555;
                }
                
                .control-btn.quantum {
                    background-color: #9c27b0;
                }
                
                .control-btn.quantum:hover {
                    background-color: #7b1fa2;
                }
                
                .quantum-info {
                    margin-bottom: 10px;
                }
                
                .quantum-info > div {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 4px;
                    font-size: 0.8em;
                }
                
                .quantum-info span {
                    font-weight: bold;
                    color: #9c27b0;
                }
                
                /* „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÂèØË¶ñÂåñÂº∑ÂåñÁî®„ÅÆ„Çπ„Çø„Ç§„É´ */
                .layer-highlighted {
                    stroke: #ff5722 !important;
                    stroke-width: 3 !important;
                    filter: drop-shadow(0 0 8px #ff5722);
                }
                
                .node-highlighted {
                    fill: #ff5722 !important;
                    stroke: #d84315 !important;
                    stroke-width: 3 !important;
                    filter: drop-shadow(0 0 6px #ff5722);
                    transform: scale(1.2);
                }
                
                .connection-highlighted {
                    stroke: #4caf50 !important;
                    stroke-width: 4 !important;
                    stroke-dasharray: 10,5;
                    /* „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂâäÈô§ */
                }
                
                
                .layer-hidden {
                    opacity: 0.1;
                    pointer-events: none;
                }
                
                .quantum-circuit-popup {
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    padding: 20px;
                    border-radius: 12px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    z-index: 1000;
                    max-width: 600px;
                    max-height: 400px;
                    overflow: auto;
                }
                
                .popup-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.5);
                    z-index: 999;
                }
            `;
            document.head.appendChild(style);
        }
        
        // CQCNNÊßãÈÄ†ÂèØË¶ñÂåñ„Å®Êìç‰ΩúÊ©üËÉΩ
        let currentHighlight = null;
        
        function toggleLayer(layerType) {
            console.log(`Toggling layer: ${layerType}`);
            const checkbox = document.getElementById(`show${layerType.charAt(0).toUpperCase() + layerType.slice(1)}`);
            const isVisible = checkbox.checked;
            
            // SVGÂÜÖ„ÅÆË©≤ÂΩì„Åô„ÇãË¶ÅÁ¥†„ÇíÂèñÂæó
            const nodes = document.querySelectorAll(`.${layerType}-node, .${layerType}`);
            const connections = document.querySelectorAll(`.${layerType}-connection`);
            
            if (isVisible) {
                // Ë°®Á§∫
                nodes.forEach(node => node.classList.remove('layer-hidden'));
                connections.forEach(conn => conn.classList.remove('layer-hidden'));
            } else {
                // ÈùûË°®Á§∫
                nodes.forEach(node => node.classList.add('layer-hidden'));
                connections.forEach(conn => conn.classList.add('layer-hidden'));
            }
            
            // ÁâπÂà•Âá¶ÁêÜ: ÈáèÂ≠ê„Éé„Éº„Éâ
            if (layerType === 'quantum') {
                const quantumNodes = document.querySelectorAll('.quantum-node');
                quantumNodes.forEach(node => {
                    if (isVisible) {
                        node.classList.remove('layer-hidden');
                    } else {
                        node.classList.add('layer-hidden');
                    }
                });
            }
        }
        
        function highlightDataFlow() {
            console.log('Highlighting data flow');
            resetVisualization();
            
            const inputNodes = document.querySelectorAll('.input-node');
            const quantumNodes = document.querySelectorAll('.quantum-node');
            const outputNodes = document.querySelectorAll('.output-node');
            const connections = document.querySelectorAll('line[stroke="rgba(100,100,100,0.6)"]');
            
            // ÊÆµÈöéÁöÑ„Å´„Éè„Ç§„É©„Ç§„Éà
            setTimeout(() => {
                inputNodes.forEach(node => node.classList.add('node-highlighted'));
            }, 0);
            
            setTimeout(() => {
                connections.forEach((conn, index) => {
                    setTimeout(() => {
                        conn.classList.add('connection-highlighted');
                    }, index * 50);
                });
            }, 500);
            
            setTimeout(() => {
                quantumNodes.forEach(node => node.classList.add('node-highlighted'));
            }, 1000);
            
            setTimeout(() => {
                outputNodes.forEach(node => node.classList.add('node-highlighted'));
            }, 1500);
            
            currentHighlight = 'dataflow';
        }
        
        function showLayerDetails() {
            const layerInfo = {
                'Preprocessor CNN': {
                    layers: ['Input(252)', 'Dense(512)', 'LayerNorm', 'ReLU', 'Dropout(0.2)', 'Dense(256)', 'LayerNorm', 'ReLU', 'Dropout(0.2)', 'Dense(128)', 'LayerNorm', 'ReLU', 'Dropout(0.1)', 'Dense(64)', 'LayerNorm', 'ReLU', 'Dropout(0.1)', 'Dense(4)'],
                    parameters: '331,844'
                },
                'Quantum Circuit': {
                    layers: ['Input Encoding', 'Variational Layers(2)', 'Measurement'],
                    parameters: '32'
                },
                'Postprocessor CNN': {
                    layers: ['Dense(128)', 'LayerNorm', 'ReLU', 'Dropout(0.1)', 'Dense(256)', 'LayerNorm', 'ReLU', 'Dropout(0.2)', 'Dense(512)', 'LayerNorm', 'ReLU', 'Dropout(0.2)', 'Dense(256)', 'LayerNorm', 'ReLU', 'Dropout(0.2)', 'Dense(128)', 'LayerNorm', 'ReLU', 'Dropout(0.1)', 'Dense(64)', 'LayerNorm', 'ReLU', 'Dense(36)'],
                    parameters: '315,168'
                }
            };
            
            let details = '<h3>üîç CQCNN Â±§Ë©≥Á¥∞ÊÉÖÂ†±</h3>';
            Object.keys(layerInfo).forEach(layer => {
                details += `<div style="margin: 15px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">`;
                details += `<h4 style="color: #2a5298; margin: 0 0 8px 0;">${layer}</h4>`;
                details += `<div style="font-size: 0.8em; margin-bottom: 5px;"><strong>„Éë„É©„É°„Éº„ÇøÊï∞:</strong> ${layerInfo[layer].parameters}</div>`;
                details += `<div style="font-size: 0.8em;"><strong>ÊßãÈÄ†:</strong> ${layerInfo[layer].layers.join(' ‚Üí ')}</div>`;
                details += '</div>';
            });
            
            showPopup(details);
        }
        
        function showForwardPass() {
            console.log('Showing forward pass path');
            resetVisualization();
            
            // ÈùôÁöÑ„Å´„Åô„Åπ„Å¶„ÅÆ„Éé„Éº„Éâ„Çí„Éè„Ç§„É©„Ç§„ÉàË°®Á§∫
            const steps = ['.input-node', '.classical-node', '.quantum-node', '.output-node'];
            steps.forEach(selector => {
                const nodes = document.querySelectorAll(selector);
                nodes.forEach(node => {
                    node.classList.add('node-highlighted');
                });
            });
        }
        
        function resetVisualization() {
            console.log('Resetting visualization');
            const highlightedElements = document.querySelectorAll('.node-highlighted, .connection-highlighted, .layer-highlighted');
            highlightedElements.forEach(el => {
                el.classList.remove('node-highlighted', 'connection-highlighted', 'layer-highlighted');
                el.style.transition = '';
            });
            
            closePopup();
            currentHighlight = null;
        }
        
        function showQuantumCircuit() {
            const quantumInfo = document.getElementById('entanglementType').textContent;
            const qubits = document.getElementById('qubitCount').textContent;
            const gates = document.getElementById('gateCount').textContent;
            
            const circuitHtml = `
                <h3>‚öõÔ∏è ÈáèÂ≠êÂõûË∑ØÂõ≥</h3>
                <div style="margin: 20px 0;">
                    <div style="font-family: monospace; background: #f5f5f5; padding: 15px; border-radius: 5px;">
                        <div>ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞: ${qubits}</div>
                        <div>„Ç≤„Éº„ÉàÊï∞: ${gates}</div>
                        <div>„Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà: ${quantumInfo}</div>
                    </div>
                </div>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-family: monospace; font-size: 0.9em; line-height: 1.6;">
                        <div>q[0] ‚îÄ|0‚ü©‚îÄ RY(Œ∏‚ÇÅ) ‚îÄ RZ(œÜ‚ÇÅ) ‚îÄ ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ RY(Œ∏‚ÇÖ) ‚îÄ RZ(œÜ‚ÇÖ) ‚îÄ M</div>
                        <div>q[1] ‚îÄ|0‚ü©‚îÄ RY(Œ∏‚ÇÇ) ‚îÄ RZ(œÜ‚ÇÇ) ‚îÄ ‚äï‚îÄ ‚óè‚îÄ‚îÄ‚îÄ RY(Œ∏‚ÇÜ) ‚îÄ RZ(œÜ‚ÇÜ) ‚îÄ M</div>
                        <div>q[2] ‚îÄ|0‚ü©‚îÄ RY(Œ∏‚ÇÉ) ‚îÄ RZ(œÜ‚ÇÉ) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚äï‚îÄ ‚óè‚îÄ RY(Œ∏‚Çá) ‚îÄ RZ(œÜ‚Çá) ‚îÄ M</div>
                        <div>q[3] ‚îÄ|0‚ü©‚îÄ RY(Œ∏‚ÇÑ) ‚îÄ RZ(œÜ‚ÇÑ) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚äï RY(Œ∏‚Çà) ‚îÄ RZ(œÜ‚Çà) ‚îÄ M</div>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.8em; color: #666;">
                        ‚óè = Control, ‚äï = Target, RY/RZ = Rotation Gates, M = Measurement
                    </div>
                </div>
                <button onclick="closePopup()" style="padding: 8px 16px; background: #2196f3; color: white; border: none; border-radius: 4px; cursor: pointer;">Èñâ„Åò„Çã</button>
            `;
            
            showPopup(circuitHtml);
        }
        
        function showPopup(content) {
            closePopup(); // Êó¢Â≠ò„ÅÆ„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó„ÇíÈñâ„Åò„Çã
            
            const overlay = document.createElement('div');
            overlay.className = 'popup-overlay';
            overlay.onclick = closePopup;
            
            const popup = document.createElement('div');
            popup.className = 'quantum-circuit-popup';
            popup.innerHTML = content;
            
            document.body.appendChild(overlay);
            document.body.appendChild(popup);
        }
        
        function closePopup() {
            const overlay = document.querySelector('.popup-overlay');
            const popup = document.querySelector('.quantum-circuit-popup');
            if (overlay) overlay.remove();
            if (popup) popup.remove();
        }
        
        // „Ç¶„Ç£„É≥„Éâ„Ç¶„É™„Çµ„Ç§„Ç∫ÂØæÂøú
        window.onresize = () => {
            initializeNetwork();
        };
        
        // „Éö„Éº„Ç∏„Ç¢„É≥„É≠„Éº„ÉâÊôÇ„ÅÆÊ∏ÖÁêÜÔºà„Ç∑„É≥„Éó„É´Áâà„Åß„ÅØ‰∏çË¶ÅÔºâ
    </script>
</body>
</html>