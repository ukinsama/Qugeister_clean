<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Geister AI Demo - 3 Step Designer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* „Çπ„ÉÜ„ÉÉ„Éó„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
        .step-navigation {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .step-item {
            display: flex;
            align-items: center;
            margin: 0 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ddd;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-right: 15px;
            transition: all 0.3s ease;
        }

        .step-item.active .step-number {
            background: #667eea;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }

        .step-item.completed .step-number {
            background: #4CAF50;
        }

        .step-label {
            font-weight: 500;
            color: #666;
            font-size: 1.1em;
            transition: color 0.3s ease;
        }

        .step-item.active .step-label {
            color: #667eea;
            font-weight: bold;
        }

        .step-item.completed .step-label {
            color: #4CAF50;
        }

        /* „Çπ„ÉÜ„ÉÉ„Éó„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .step-content {
            display: none;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-title {
            font-size: 2em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Step 1: ÈáèÂ≠êÊé®ÂÆöÂô®ÈÅ∏Êäû */
        .estimator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .estimator-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
        }

        .estimator-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .estimator-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .estimator-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 15px;
        }

        .estimator-title {
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }

        .estimator-specs {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 15px;
        }

        .estimator-description {
            font-size: 0.95em;
            line-height: 1.4;
        }

        /* Step 2: „Éë„É©„É°„Éº„ÇøË®≠ÂÆö */
        .param-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .param-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .param-section-title {
            font-size: 1.3em;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .param-item {
            margin-bottom: 20px;
        }

        .param-label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .slider {
            flex: 1;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .value-display {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }

        /* Step 3: „Ç≥„Éº„ÉâÁîüÊàê */
        .code-section {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .code-title {
            font-size: 1.3em;
            color: #667eea;
            font-weight: bold;
        }

        .copy-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .code-display {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            max-height: 500px;
            overflow-y: auto;
        }

        /* „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Éú„Çø„É≥ */
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .nav-button:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .nav-button.next {
            background: #4CAF50;
        }

        .nav-button.next:hover {
            background: #45a049;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
        @media (max-width: 768px) {
            .param-grid {
                grid-template-columns: 1fr;
            }
            
            .step-navigation {
                flex-direction: column;
                gap: 20px;
            }
            
            .step-item {
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <div class="header">
            <h1>üîÆ Quantum Geister AI Demo</h1>
            <p>ÈáèÂ≠êË®àÁÆó„Å´„Çà„ÇãÊïµ„Ç≥„ÉûÊé®ÂÆö„Ç∑„Çπ„ÉÜ„É† - 3„Çπ„ÉÜ„ÉÉ„Éó„ÅßAIÊßãÁØâ</p>
        </div>

        <!-- „Çπ„ÉÜ„ÉÉ„Éó„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
        <div class="step-navigation">
            <div class="step-item active" id="nav-step1" onclick="goToStep(1)">
                <div class="step-number">1</div>
                <div class="step-label">Êé®ÂÆöÂô®ÈÅ∏Êäû</div>
            </div>
            <div class="step-item" id="nav-step2" onclick="goToStep(2)">
                <div class="step-number">2</div>
                <div class="step-label">„Éë„É©„É°„Éº„ÇøË®≠ÂÆö</div>
            </div>
            <div class="step-item" id="nav-step3" onclick="goToStep(3)">
                <div class="step-number">3</div>
                <div class="step-label">„Ç≥„Éº„ÉâÁîüÊàê</div>
            </div>
        </div>

        <!-- Step 1: ÈáèÂ≠êÊé®ÂÆöÂô®ÈÅ∏Êäû -->
        <div class="step-content active" id="step1">
            <div class="step-title">‚öõÔ∏è ÈáèÂ≠êÊé®ÂÆöÂô®„ÇíÈÅ∏Êäû</div>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                „Ç≤„Éº„É†„ÅÆÁî®ÈÄî„Å´Âøú„Åò„Å¶ÊúÄÈÅ©„Å™Êïµ„Ç≥„ÉûÊé®ÂÆöÊñπÂºè„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ
            </p>
            
            <div class="estimator-grid">
                <div class="estimator-card" id="probabilistic-card" onclick="selectEstimator('probabilistic')">
                    <div class="estimator-icon">üé≤</div>
                    <div class="estimator-title">Á¢∫ÁéáÁöÑÊé®ÂÆöÂô®</div>
                    <div class="estimator-specs">
                        <strong>Á≤æÂ∫¶:</strong> 70-75% | <strong>ÈÄüÂ∫¶:</strong> 10ms<br>
                        <strong>„É°„É¢„É™:</strong> 50MB | <strong>Ë§áÈõëÂ∫¶:</strong> ‰Ωé
                    </div>
                    <div class="estimator-description">
                        ÂêÑÊïµ„Ç≥„Éû„ÇíÁã¨Á´ã„Åó„Å¶ÂñÑÁéâÁ¢∫Áéá„ÇíÊé®ÂÆö„ÄÇ„Ç∑„É≥„Éó„É´„ÅßÁêÜËß£„Åó„ÇÑ„Åô„Åè„ÄÅÂàùÂøÉËÄÖÂêë„ÅëAI„ÇÑÈ´òÈÄüÂØæÊà¶„Å´ÊúÄÈÅ©„ÄÇ
                    </div>
                </div>

                <div class="estimator-card" id="correlative-card" onclick="selectEstimator('correlative')">
                    <div class="estimator-icon">üîó</div>
                    <div class="estimator-title">Áõ∏Èñ¢ÂûãÊé®ÂÆöÂô®</div>
                    <div class="estimator-specs">
                        <strong>Á≤æÂ∫¶:</strong> 80-85% | <strong>ÈÄüÂ∫¶:</strong> 15ms<br>
                        <strong>„É°„É¢„É™:</strong> 80MB | <strong>Ë§áÈõëÂ∫¶:</strong> ‰∏≠
                    </div>
                    <div class="estimator-description">
                        „Ç≥„ÉûÈñì„ÅÆÁõ∏Èñ¢„ÇíÈáèÂ≠ê„Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà„ÅßË°®Áèæ„ÄÇÁõ∏Êâã„ÅÆÈÖçÁΩÆÊà¶Áï•„ÇíÊé®ÂÆö„Åó„ÄÅÂ§ß‰ºö„É¨„Éô„É´„ÅÆÂØæÊà¶„Å´ÂØæÂøú„ÄÇ
                    </div>
                </div>

                <div class="estimator-card" id="temporal-card" onclick="selectEstimator('temporal')">
                    <div class="estimator-icon">‚è∞</div>
                    <div class="estimator-title">ÊôÇÁ≥ªÂàóÊé®ÂÆöÂô®</div>
                    <div class="estimator-specs">
                        <strong>Á≤æÂ∫¶:</strong> 85-90% | <strong>ÈÄüÂ∫¶:</strong> 20ms<br>
                        <strong>„É°„É¢„É™:</strong> 120MB | <strong>Ë§áÈõëÂ∫¶:</strong> È´ò
                    </div>
                    <div class="estimator-description">
                        ÈÅéÂéª„ÅÆË°åÂãïÂ±•Ê≠¥„Åã„ÇâÂ≠¶Áøí„ÄÇÁõ∏Êâã„ÅÆÁôñ„ÇÑÊà¶Áï•„Éë„Çø„Éº„É≥„ÇíÊ§úÂá∫„Åó„ÄÅ„Éû„Çπ„Çø„Éº„É¨„Éô„É´„ÅÆÂØæÊà¶„Å´ÂØæÂøú„ÄÇ
                    </div>
                </div>

                <div class="estimator-card" id="ensemble-card" onclick="selectEstimator('ensemble')">
                    <div class="estimator-icon">üé≠</div>
                    <div class="estimator-title">„Ç¢„É≥„Çµ„É≥„Éñ„É´Êé®ÂÆöÂô®</div>
                    <div class="estimator-specs">
                        <strong>Á≤æÂ∫¶:</strong> 90-95% | <strong>ÈÄüÂ∫¶:</strong> 35ms<br>
                        <strong>„É°„É¢„É™:</strong> 200MB | <strong>Ë§áÈõëÂ∫¶:</strong> ÊúÄÈ´ò
                    </div>
                    <div class="estimator-description">
                        Ë§áÊï∞Êé®ÂÆöÂô®„ÇíÁµ±Âêà„Åó„ÅüÊúÄÈ´òÁ≤æÂ∫¶Áâà„ÄÇÁ†îÁ©∂Áî®ÈÄî„ÇÑÊúÄÈáçË¶ÅÂØæÊà¶„Åß„ÅÆ‰ΩøÁî®„ÇíÊÉ≥ÂÆö„ÄÇË®àÁÆó„Ç≥„Çπ„Éà„ÅåÈ´ò„ÅÑ„ÄÇ
                    </div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button class="nav-button" disabled>‚Üê Ââç„Å∏</button>
                <button class="nav-button next" onclick="nextStep()" id="step1-next" disabled>Ê¨°„Å∏ ‚Üí</button>
            </div>
        </div>

        <!-- Step 2: „Éë„É©„É°„Éº„ÇøË®≠ÂÆö -->
        <div class="step-content" id="step2">
            <div class="step-title">‚öôÔ∏è „Éë„É©„É°„Éº„ÇøË®≠ÂÆö</div>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                ÈÅ∏Êäû„Åó„ÅüÊé®ÂÆöÂô®„ÅÆÂãï‰Ωú„Éë„É©„É°„Éº„Çø„ÇíË™øÊï¥„Åó„Å¶„Åè„Å†„Åï„ÅÑ
            </p>

            <div class="param-grid">
                <!-- ÈáèÂ≠êÂõûË∑Ø„Éë„É©„É°„Éº„Çø -->
                <div class="param-section">
                    <div class="param-section-title">
                        <span>‚öõÔ∏è</span>ÈáèÂ≠êÂõûË∑ØË®≠ÂÆö
                    </div>
                    
                    <div class="param-item">
                        <label class="param-label">ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞ (n_qubits)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="qubitsSlider" 
                                   min="4" max="8" value="4" 
                                   oninput="updateQuantumParams()">
                            <div class="value-display" id="qubitsValue">4</div>
                        </div>
                    </div>

                    <div class="param-item">
                        <label class="param-label">„É¨„Ç§„É§„ÉºÊï∞ (n_layers)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="layersSlider" 
                                   min="2" max="5" value="3" 
                                   oninput="updateQuantumParams()">
                            <div class="value-display" id="layersValue">3</div>
                        </div>
                    </div>

                    <div class="param-item" id="memoryParam" style="display: none;">
                        <label class="param-label">„É°„É¢„É™Èï∑ (ÊôÇÁ≥ªÂàóÁî®)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="memorySlider" 
                                   min="3" max="10" value="5" 
                                   oninput="updateQuantumParams()">
                            <div class="value-display" id="memoryValue">5</div>
                        </div>
                    </div>
                </div>

                <!-- Â≠¶Áøí„Éë„É©„É°„Éº„Çø -->
                <div class="param-section">
                    <div class="param-section-title">
                        <span>üìö</span>Â≠¶ÁøíË®≠ÂÆö
                    </div>
                    
                    <div class="param-item">
                        <label class="param-label">Â≠¶ÁøíÁéá (learning_rate)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="lrSlider" 
                                   min="-4" max="-2" value="-3" step="0.1" 
                                   oninput="updateLearningParams()">
                            <div class="value-display" id="lrValue">0.001</div>
                        </div>
                    </div>

                    <div class="param-item">
                        <label class="param-label">Êé¢Á¥¢Áéá (epsilon)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="epsilonSlider" 
                                   min="0.05" max="0.3" value="0.1" step="0.01" 
                                   oninput="updateLearningParams()">
                            <div class="value-display" id="epsilonValue">0.1</div>
                        </div>
                    </div>

                    <div class="param-item">
                        <label class="param-label">Êé¢Á¥¢Ê∏õË°∞Áéá (epsilon_decay)</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="decaySlider" 
                                   min="0.990" max="0.999" value="0.995" step="0.001" 
                                   oninput="updateLearningParams()">
                            <div class="value-display" id="decayValue">0.995</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- „Éë„É©„É°„Éº„ÇøË™¨Êòé -->
            <div style="background: #f0f4ff; padding: 20px; border-radius: 10px; margin: 20px 0;">
                <h4 style="color: #667eea; margin-bottom: 10px;">üìù „Éë„É©„É°„Éº„Çø„ÅÆË™¨Êòé</h4>
                <div id="paramExplanation">Êé®ÂÆöÂô®„ÇíÈÅ∏Êäû„Åô„Çã„Å®„ÄÅ„Éë„É©„É°„Éº„Çø„ÅÆË©≥Á¥∞Ë™¨Êòé„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ</div>
            </div>

            <div class="navigation-buttons">
                <button class="nav-button" onclick="prevStep()">‚Üê Ââç„Å∏</button>
                <button class="nav-button next" onclick="nextStep()">Ê¨°„Å∏ ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: „Ç≥„Éº„ÉâÁîüÊàê -->
        <div class="step-content" id="step3">
            <div class="step-title">üöÄ AIÊßãÁØâ„Ç≥„Éº„ÉâÁîüÊàê</div>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">
                Ë®≠ÂÆö„Å´Âü∫„Å•„ÅÑ„Å¶Python„Ç≥„Éº„Éâ„ÇíËá™ÂãïÁîüÊàê„Åó„Åæ„Åô
            </p>

            <!-- Ë®≠ÂÆö„Çµ„Éû„É™„Éº -->
            <div style="background: #f0f4ff; padding: 25px; border-radius: 15px; margin-bottom: 30px;">
                <h4 style="color: #667eea; margin-bottom: 15px;">üìã ÊßãÊàê„Çµ„Éû„É™„Éº</h4>
                <div id="configSummary">
                    Ë®≠ÂÆö„ÇíÂÆå‰∫Ü„Åô„Çã„Å®„ÄÅAIÊßãÊàê„ÅÆË©≥Á¥∞„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ
                </div>
            </div>

            <!-- „Ç≥„Éº„ÉâÂá∫Âäõ -->
            <div class="code-section">
                <div class="code-header">
                    <div class="code-title">üìù ÁîüÊàê„Åï„Çå„ÅüPython„Ç≥„Éº„Éâ</div>
                    <button class="copy-button" onclick="copyCode()" id="copyBtn" disabled>üìã „Ç≥„Éî„Éº</button>
                </div>
                <div class="code-display" id="generatedCode">
                    „Åì„Åì„Å´ÁîüÊàê„Åï„Çå„Åü„Ç≥„Éº„Éâ„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô...
                </div>
            </div>

            <div class="navigation-buttons">
                <button class="nav-button" onclick="prevStep()">‚Üê Ââç„Å∏</button>
                <button class="nav-button next" onclick="generateFinalCode()" style="background: #4CAF50;">üöÄ ÊúÄÁµÇ„Ç≥„Éº„ÉâÁîüÊàê</button>
            </div>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        let currentStep = 1;
        let selectedEstimator = null;
        let config = {
            estimator_type: null,
            n_qubits: 4,
            n_layers: 3,
            memory_length: 5,
            learning_rate: 0.001,
            epsilon: 0.1,
            epsilon_decay: 0.995
        };

        // „Çπ„ÉÜ„ÉÉ„ÉóÂàá„ÇäÊõø„Åà
        function goToStep(step) {
            if (step < currentStep || (step === currentStep + 1 && validateCurrentStep())) {
                // ÁèæÂú®„ÅÆ„Çπ„ÉÜ„ÉÉ„Éó„ÇíÈùûË°®Á§∫
                document.getElementById(`step${currentStep}`).classList.remove('active');
                document.getElementById(`nav-step${currentStep}`).classList.remove('active');
                
                // Êñ∞„Åó„ÅÑ„Çπ„ÉÜ„ÉÉ„Éó„ÇíË°®Á§∫
                currentStep = step;
                document.getElementById(`step${currentStep}`).classList.add('active');
                document.getElementById(`nav-step${currentStep}`).classList.add('active');
                
                // ÂÆå‰∫Ü„Åó„Åü„Çπ„ÉÜ„ÉÉ„Éó„Çí„Éû„Éº„ÇØ
                for (let i = 1; i < currentStep; i++) {
                    document.getElementById(`nav-step${i}`).classList.add('completed');
                }
                
                // „Çπ„ÉÜ„ÉÉ„ÉóÂõ∫Êúâ„ÅÆÂá¶ÁêÜ
                if (currentStep === 2) {
                    updateParameterVisibility();
                } else if (currentStep === 3) {
                    updateConfigSummary();
                    generateCode();
                }
            }
        }

        function nextStep() {
            if (validateCurrentStep()) {
                goToStep(currentStep + 1);
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }

        function validateCurrentStep() {
            if (currentStep === 1) {
                return selectedEstimator !== null;
            }
            return true;
        }

        // Êé®ÂÆöÂô®ÈÅ∏Êäû
        function selectEstimator(estimatorType) {
            // Ââç„ÅÆÈÅ∏Êäû„Çí„É™„Çª„ÉÉ„Éà
            document.querySelectorAll('.estimator-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Êñ∞„Åó„ÅÑÈÅ∏Êäû„Çí„Éû„Éº„ÇØ
            document.getElementById(`${estimatorType}-card`).classList.add('selected');
            selectedEstimator = estimatorType;
            config.estimator_type = estimatorType;
            
            // Ê¨°„Å∏„Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
            document.getElementById('step1-next').disabled = false;
            
            // „Éá„Éï„Ç©„É´„Éà„Éë„É©„É°„Éº„Çø„ÇíË®≠ÂÆö
            setDefaultParams(estimatorType);
        }

        function setDefaultParams(estimatorType) {
            switch(estimatorType) {
                case 'probabilistic':
                    config.n_qubits = 4;
                    config.n_layers = 3;
                    break;
                case 'correlative':
                    config.n_qubits = 6;
                    config.n_layers = 4;
                    break;
                case 'temporal':
                    config.n_qubits = 6;
                    config.n_layers = 4;
                    config.memory_length = 8;
                    break;
                case 'ensemble':
                    config.n_qubits = 8;
                    config.n_layers = 5;
                    break;
            }
            
            // UI„ÇíÊõ¥Êñ∞
            if (currentStep === 2) {
                updateParameterSliders();
            }
        }

        function updateParameterVisibility() {
            const memoryParam = document.getElementById('memoryParam');
            if (selectedEstimator === 'temporal' || selectedEstimator === 'ensemble') {
                memoryParam.style.display = 'block';
            } else {
                memoryParam.style.display = 'none';
            }
            
            updateParameterSliders();
            updateParamExplanation();
        }

        function updateParameterSliders() {
            document.getElementById('qubitsSlider').value = config.n_qubits;
            document.getElementById('qubitsValue').textContent = config.n_qubits;
            
            document.getElementById('layersSlider').value = config.n_layers;
            document.getElementById('layersValue').textContent = config.n_layers;
            
            document.getElementById('memorySlider').value = config.memory_length;
            document.getElementById('memoryValue').textContent = config.memory_length;
            
            document.getElementById('lrSlider').value = Math.log10(config.learning_rate);
            document.getElementById('lrValue').textContent = config.learning_rate;
            
            document.getElementById('epsilonSlider').value = config.epsilon;
            document.getElementById('epsilonValue').textContent = config.epsilon;
            
            document.getElementById('decaySlider').value = config.epsilon_decay;
            document.getElementById('decayValue').textContent = config.epsilon_decay;
        }

        function updateQuantumParams() {
            config.n_qubits = parseInt(document.getElementById('qubitsSlider').value);
            config.n_layers = parseInt(document.getElementById('layersSlider').value);
            config.memory_length = parseInt(document.getElementById('memorySlider').value);
            
            document.getElementById('qubitsValue').textContent = config.n_qubits;
            document.getElementById('layersValue').textContent = config.n_layers;
            document.getElementById('memoryValue').textContent = config.memory_length;
        }

        function updateLearningParams() {
            config.learning_rate = Math.pow(10, parseFloat(document.getElementById('lrSlider').value));
            config.epsilon = parseFloat(document.getElementById('epsilonSlider').value);
            config.epsilon_decay = parseFloat(document.getElementById('decaySlider').value);
            
            document.getElementById('lrValue').textContent = config.learning_rate.toFixed(4);
            document.getElementById('epsilonValue').textContent = config.epsilon.toFixed(2);
            document.getElementById('decayValue').textContent = config.epsilon_decay.toFixed(3);
        }

        function updateParamExplanation() {
            const explanations = {
                'probabilistic': `
                    <strong>Á¢∫ÁéáÁöÑÊé®ÂÆöÂô®„ÅÆÁâπÂæ¥:</strong><br>
                    ‚Ä¢ ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞: ÂêÑÊïµ„Ç≥„Éû„ÅÆÁâπÂæ¥Êï∞Ôºà‰ΩçÁΩÆ„ÄÅÁßªÂãï„ÄÅÂë®Ëæ∫„ÄÅÊà¶Ë°ìÔºâ<br>
                    ‚Ä¢ „É¨„Ç§„É§„ÉºÊï∞: ÈáèÂ≠êÂõûË∑Ø„ÅÆÊ∑±„ÅïÔºàÊ∑±„ÅÑ„Åª„Å©Ë§áÈõë„Å™„Éë„Çø„Éº„É≥„ÇíÂ≠¶ÁøíÔºâ<br>
                    ‚Ä¢ Ë®àÁÆóÈáè: O(n_qubits √ó n_layers) - ËªΩÈáè„ÅßÈ´òÈÄü
                `,
                'correlative': `
                    <strong>Áõ∏Èñ¢ÂûãÊé®ÂÆöÂô®„ÅÆÁâπÂæ¥:</strong><br>
                    ‚Ä¢ ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞: ÂÖ®Êïµ„Ç≥„Éû„ÇíÂêåÊôÇÂá¶ÁêÜÔºà„Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„ÉàÁî®Ôºâ<br>
                    ‚Ä¢ „É¨„Ç§„É§„ÉºÊï∞: Áõ∏Èñ¢Â≠¶Áøí„ÅÆÊ∑±„ÅïÔºà„Ç≥„ÉûÈñìÈñ¢‰øÇ„ÅÆË§áÈõë„ÅïÔºâ<br>
                    ‚Ä¢ Ë®àÁÆóÈáè: O(n_qubits¬≤ √ó n_layers) - ‰∏≠Á®ãÂ∫¶„ÅÆË≤†Ëç∑
                `,
                'temporal': `
                    <strong>ÊôÇÁ≥ªÂàóÊé®ÂÆöÂô®„ÅÆÁâπÂæ¥:</strong><br>
                    ‚Ä¢ „É°„É¢„É™Èï∑: ÈÅéÂéª‰ΩïÊâãÂàÜ„ÇíË®òÊÜ∂„Åô„Çã„ÅãÔºàÈï∑„ÅÑ„Åª„Å©Á≤æÂ∫¶Âêë‰∏äÔºâ<br>
                    ‚Ä¢ „É¨„Ç§„É§„ÉºÊï∞: ÊôÇÁ≥ªÂàó„Éë„Çø„Éº„É≥„ÅÆÂ≠¶ÁøíÊ∑±Â∫¶<br>
                    ‚Ä¢ Ë®àÁÆóÈáè: O(memory_length √ó n_qubits √ó n_layers) - „ÇÑ„ÇÑÈáç„ÅÑ
                `,
                'ensemble': `
                    <strong>„Ç¢„É≥„Çµ„É≥„Éñ„É´Êé®ÂÆöÂô®„ÅÆÁâπÂæ¥:</strong><br>
                    ‚Ä¢ ÂÖ®Êé®ÂÆöÂô®„ÇíÁµ±Âêà: Á¢∫ÁéáÁöÑ + Áõ∏Èñ¢Âûã + ÊôÇÁ≥ªÂàó<br>
                    ‚Ä¢ ÊúÄÈ´ò„ÅÆÁ≤æÂ∫¶„Å®‰ø°È†ºÊÄß„ÇíÂÆüÁèæ<br>
                    ‚Ä¢ Ë®àÁÆóÈáè: ‰ªñ„ÅÆÊâãÊ≥ï„ÅÆÂêàË®à - ÊúÄ„ÇÇÈáç„ÅÑ
                `
            };
            
            document.getElementById('paramExplanation').innerHTML = 
                explanations[selectedEstimator] || '„Éë„É©„É°„Éº„Çø„ÅÆË™¨Êòé„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ';
        }

        function updateConfigSummary() {
            const estimatorNames = {
                'probabilistic': 'Á¢∫ÁéáÁöÑÊé®ÂÆöÂô®',
                'correlative': 'Áõ∏Èñ¢ÂûãÊé®ÂÆöÂô®', 
                'temporal': 'ÊôÇÁ≥ªÂàóÊé®ÂÆöÂô®',
                'ensemble': '„Ç¢„É≥„Çµ„É≥„Éñ„É´Êé®ÂÆöÂô®'
            };
            
            const summary = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <strong>üîÆ Êé®ÂÆöÂô®„Çø„Ç§„Éó:</strong> ${estimatorNames[selectedEstimator]}<br>
                        <strong>‚öõÔ∏è ÈáèÂ≠ê„Éì„ÉÉ„ÉàÊï∞:</strong> ${config.n_qubits}<br>
                        <strong>üìö „É¨„Ç§„É§„ÉºÊï∞:</strong> ${config.n_layers}<br>
                        ${selectedEstimator === 'temporal' || selectedEstimator === 'ensemble' ? 
                          `<strong>‚è∞ „É°„É¢„É™Èï∑:</strong> ${config.memory_length}<br>` : ''}
                    </div>
                    <div>
                        <strong>üéì Â≠¶ÁøíÁéá:</strong> ${config.learning_rate}<br>
                        <strong>üé≤ Êé¢Á¥¢Áéá:</strong> ${config.epsilon}<br>
                        <strong>üìâ Ê∏õË°∞Áéá:</strong> ${config.epsilon_decay}<br>
                    </div>
                </div>
            `;
            
            document.getElementById('configSummary').innerHTML = summary;
        }

        function generateCode() {
            const code = `#!/usr/bin/env python3
"""
${getEstimatorDescription()}
Ëá™ÂãïÁîüÊàê„Åï„Çå„ÅüQuantum Geister AI„Ç≥„Éº„Éâ
"""

import torch
import torch.nn as nn
import pennylane as qml
import numpy as np

class ${getEstimatorClassName()}(nn.Module):
    def __init__(self):
        super().__init__()
        
        # ÈáèÂ≠ê„Éë„É©„É°„Éº„Çø
        self.n_qubits = ${config.n_qubits}
        self.n_layers = ${config.n_layers}
        ${selectedEstimator === 'temporal' || selectedEstimator === 'ensemble' ? 
          `self.memory_length = ${config.memory_length}` : ''}
        
        # ÈáèÂ≠ê„Éá„Éê„Ç§„Çπ
        self.dev = qml.device('default.qubit', wires=self.n_qubits)
        
        # Â≠¶Áøí„Éë„É©„É°„Éº„Çø
        self.learning_rate = ${config.learning_rate}
        self.epsilon = ${config.epsilon}
        self.epsilon_decay = ${config.epsilon_decay}
        
        ${getEstimatorSpecificCode()}
        
    def forward(self, state_vector):
        """
        Êïµ„Ç≥„ÉûÊé®ÂÆö„ÅÆÂÆüË°å
        
        Args:
            state_vector: [batch, 252] Áä∂ÊÖã„Éô„ÇØ„Éà„É´
        Returns:
            opponent_features: [batch, ${getOutputDimension()}] ÊïµÊé®ÂÆöÁµêÊûú
        """
        ${getForwardCode()}

${getQuantumCircuitCode()}

# ‰ΩøÁî®‰æã
if __name__ == "__main__":
    print("üîÆ ${getEstimatorDescription()}")
    print("=" * 50)
    
    # „É¢„Éá„É´ÂàùÊúüÂåñ
    model = ${getEstimatorClassName()}()
    print(f"‚úÖ „É¢„Éá„É´‰ΩúÊàêÂÆå‰∫Ü")
    print(f"   Âá∫ÂäõÊ¨°ÂÖÉ: ${getOutputDimension()}")
    print(f"   ÈáèÂ≠ê„Éì„ÉÉ„Éà: {config.n_qubits}")
    print(f"   „É¨„Ç§„É§„ÉºÊï∞: {config.n_layers}")
    
    # „Çµ„É≥„Éó„É´Êé®ÂÆö
    sample_state = torch.randn(1, 252)
    with torch.no_grad():
        result = model(sample_state)
        print(f"   Êé®ÂÆöÁµêÊûúshape: {result.shape}")
    
    print("üöÄ Quantum Geister AI Ê∫ñÂÇôÂÆå‰∫Ü!")`;
            
            document.getElementById('generatedCode').textContent = code;
            document.getElementById('copyBtn').disabled = false;
        }

        function getEstimatorDescription() {
            const descriptions = {
                'probabilistic': 'Probabilistic Quantum Estimator - Á¢∫ÁéáÁöÑÈáèÂ≠êÊé®ÂÆöÂô®',
                'correlative': 'Correlative Quantum Estimator - Áõ∏Èñ¢ÂûãÈáèÂ≠êÊé®ÂÆöÂô®',
                'temporal': 'Temporal Quantum Estimator - ÊôÇÁ≥ªÂàóÈáèÂ≠êÊé®ÂÆöÂô®',
                'ensemble': 'Ensemble Quantum Estimator - „Ç¢„É≥„Çµ„É≥„Éñ„É´ÈáèÂ≠êÊé®ÂÆöÂô®'
            };
            return descriptions[selectedEstimator];
        }

        function getEstimatorClassName() {
            const classNames = {
                'probabilistic': 'ProbabilisticQuantumEstimator',
                'correlative': 'CorrelativeQuantumEstimator',
                'temporal': 'TemporalQuantumEstimator',
                'ensemble': 'EnsembleQuantumEstimator'
            };
            return classNames[selectedEstimator];
        }

        function getOutputDimension() {
            const dimensions = {
                'probabilistic': 16,  // 8Á¢∫Áéá + 8‰ø°È†ºÂ∫¶
                'correlative': 24,    // 8Á¢∫Áéá + 16Áõ∏Èñ¢
                'temporal': 20,       // 8Á¢∫Áéá + 12ÊôÇÁ≥ªÂàóÁâπÂæ¥
                'ensemble': 32        // ÂÖ®ÁâπÂæ¥Áµ±Âêà
            };
            return dimensions[selectedEstimator];
        }

        function getEstimatorSpecificCode() {
            switch(selectedEstimator) {
                case 'probabilistic':
                    return `        # 8ÂÄã„ÅÆÊïµ„Ç≥„ÉûÁî®„Éë„É©„É°„Éº„Çø
        self.weights = nn.Parameter(
            torch.randn(8, self.n_layers, self.n_qubits, 2) * 0.1
        )`;
                case 'correlative':
                    return `        # ÂÖ®Êïµ„Ç≥„ÉûÁõ∏Èñ¢Áî®„Éë„É©„É°„Éº„Çø
        self.weights = nn.Parameter(
            torch.randn(self.n_layers, self.n_qubits, self.n_qubits) * 0.1
        )`;
                case 'temporal':
                    return `        # ÊôÇÁ≥ªÂàóË®òÊÜ∂„Éê„ÉÉ„Éï„Ç°
        self.memory_buffer = torch.zeros(self.memory_length, 8, 4)
        self.weights = nn.Parameter(
            torch.randn(self.n_layers + self.memory_length, self.n_qubits, 2) * 0.1
        )`;
                case 'ensemble':
                    return `        # Ë§áÊï∞Êé®ÂÆöÂô®„ÅÆÁµ±Âêà
        self.prob_estimator = ProbabilisticQuantumEstimator()
        self.corr_estimator = CorrelativeQuantumEstimator()
        self.temp_estimator = TemporalQuantumEstimator()
        self.fusion_layer = nn.Linear(60, 32)`;
            }
        }

        function getForwardCode() {
            switch(selectedEstimator) {
                case 'probabilistic':
                    return `        batch_size = state_vector.size(0)
        probabilities = torch.zeros(batch_size, 8)
        confidences = torch.zeros(batch_size, 8)
        
        # ÂêÑÊïµ„Ç≥„Éû„ÇíÁã¨Á´ãÊé®ÂÆö
        for i in range(8):
            prob, conf = self.estimate_single_piece(state_vector, i)
            probabilities[:, i] = prob
            confidences[:, i] = conf
        
        return torch.cat([probabilities, confidences], dim=1)`;
                default:
                    return `        # ${selectedEstimator}Êé®ÂÆöÂô®„ÅÆÂÆüË£Ö
        return self.quantum_estimation_circuit(state_vector)`;
            }
        }

        function getQuantumCircuitCode() {
            return `
    @qml.qnode(device, interface="torch")
    def quantum_circuit(self, features, weights):
        """ÈáèÂ≠êÂõûË∑Ø„Å´„Çà„ÇãÊé®ÂÆö"""
        # „Ç®„É≥„Ç≥„Éº„Éá„Ç£„É≥„Ç∞Â±§
        for i in range(self.n_qubits):
            qml.RY(features[i] * np.pi, wires=i)
        
        # Â§âÂàÜÈáèÂ≠êÂõûË∑Ø
        for layer in range(self.n_layers):
            # „Ç®„É≥„Çø„É≥„Ç∞„É´„É°„É≥„Éà
            for i in range(self.n_qubits - 1):
                qml.CNOT(wires=[i, i + 1])
            
            # „Éë„É©„É°„Éº„ÇøÂåñÂõûËª¢
            for i in range(self.n_qubits):
                qml.RY(weights[layer, i, 0], wires=i)
                qml.RZ(weights[layer, i, 1], wires=i)
        
        # Ê∏¨ÂÆö
        return [qml.expval(qml.PauliZ(i)) for i in range(self.n_qubits)]`;
        }

        function copyCode() {
            const codeElement = document.getElementById('generatedCode');
            const textArea = document.createElement('textarea');
            textArea.value = codeElement.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            const copyBtn = document.getElementById('copyBtn');
            const originalText = copyBtn.textContent;
            copyBtn.textContent = '‚úÖ „Ç≥„Éî„ÉºÂÆå‰∫Ü!';
            copyBtn.style.background = '#4CAF50';
            
            setTimeout(() => {
                copyBtn.textContent = originalText;
                copyBtn.style.background = '#667eea';
            }, 2000);
        }

        function generateFinalCode() {
            generateCode();
            alert('üöÄ Quantum Geister AI „ÅÆÊßãÁØâ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü!\n\n„Ç≥„Éº„Éâ„Çí„Ç≥„Éî„Éº„Åó„Å¶„ÄÅPythonÁí∞Â¢É„ÅßÂÆüË°å„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n\nÂøÖË¶Å„Å™„É©„Ç§„Éñ„É©„É™:\n- torch\n- pennylane\n- numpy');
        }

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            updateParamExplanation();
        });
    </script>
</body>
</html>